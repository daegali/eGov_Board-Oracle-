<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="BoardSpace">

	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="boardVO" type="main.service.BoardVO"/>

	<insert id="boardDAO.insertBoard">
		<![CDATA[
			INSERT INTO tb_board
				(unq
				  , title
				  , pass
				  , name
				  , content
				  , hits
				  , rdate )
			VALUES (board_seq.nextval
				  , #title#
				  , #pass#
				  , #name#
				  , #content# 
				  ,  0
				  ,  sysdate )
		]]>
	</insert>
	
	<select id="boardDAO.selectBoardList" parameterClass="boardVO" resultClass="egovMap">
	<![CDATA[	
SELECT b.* FROM(
	SELECT rownum rn, a.* FROM ( SELECT unq
			 , title
			 , name
			 , content
			 , hits
			 , to_char(rdate, 'yyyy-mm-dd')  rdate
	FROM 
	 		tb_board
		ORDER BY unq DESC ) a ) b
	WHERE 
				rn >= #startIndex# and rn <= #endIndex#
			]]>					
	</select>
	
	<select id="boardDAO.selectBoardTotal"  resultClass="java.lang.Integer">
		SELECT COUNT(*) total FROM tb_board
	</select>

</sqlMap>